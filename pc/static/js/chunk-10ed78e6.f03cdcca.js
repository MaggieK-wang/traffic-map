(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10ed78e6"],{"2d1d":function(e,t,o){"use strict";o.d(t,"d",(function(){return r})),o.d(t,"a",(function(){return i})),o.d(t,"c",(function(){return n})),o.d(t,"e",(function(){return s})),o.d(t,"b",(function(){return l}));var a=o("b775");sessionStorage.getItem("loginAccount");function r(e){return Object(a["a"])({url:"http://106.14.165.150:8083/cate/listCateTree",method:"get",params:e})}function i(e){return Object(a["a"])({url:"http://106.14.165.150:8083/cate/addCate",method:"post",data:e})}function n(e){return Object(a["a"])({url:"http://106.14.165.150:8083/cate/findCateByCode",method:"get",params:e})}function s(e){return Object(a["a"])({url:"http://106.14.165.150:8083/cate/updateCateByCode",method:"post",data:e})}function l(e){return Object(a["a"])({url:"http://106.14.165.150:8083/cate/deleteCateByCode",method:"get",params:e})}},a192:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[o("el-row",[o("el-col",{attrs:{span:12}},[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleAdd}},[e._v("添加")]),e._v(" "),o("el-button",{attrs:{size:"mini"},on:{click:e.handleDelete}},[e._v("删除")]),e._v(" "),o("el-button",{attrs:{size:"mini"},on:{click:e.resetChecked}},[e._v("清空")])],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:8}},[o("el-tree",{ref:"tree",attrs:{data:e.cateData,"show-checkbox":"","default-expand-all":"","node-key":"nodeId","highligeht-current":"",props:e.defaultProps,"check-strictly":""},on:{"node-click":e.handleNodeClick}})],1),e._v(" "),o("el-col",{attrs:{span:16}},[o("el-card",[o("div",{attrs:{slot:"header"},slot:"header"},[o("span",[e._v("商品类别")]),e._v(" "),o("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.edit}},[e._v("编辑")])],1),e._v(" "),o("div",[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px",rules:e.formRules}},[o("el-form-item",{attrs:{required:"",label:"分类名称",prop:"cateName"}},[o("el-input",{attrs:{disabled:"info"==e.formStus},model:{value:e.form.cateName,callback:function(t){e.$set(e.form,"cateName",t)},expression:"form.cateName"}})],1),e._v(" "),o("el-form-item",{attrs:{required:"",label:"分类编码"}},[o("el-input",{attrs:{disabled:"info"==e.formStus},model:{value:e.form.cateCode,callback:function(t){e.$set(e.form,"cateCode",t)},expression:"form.cateCode"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"备注"}},[o("el-input",{attrs:{disabled:"info"==e.formStus},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),e._v(" "),o("el-form-item",{attrs:{required:"",label:"父级分类编码"}},[o("el-input",{attrs:{disabled:"info"==e.formStus},model:{value:e.form.parentCateCode,callback:function(t){e.$set(e.form,"parentCateCode",t)},expression:"form.parentCateCode"}})],1),e._v(" "),o("el-form-item",{attrs:{required:"",label:"分类id"}},[o("el-input",{attrs:{disabled:"info"==e.formStus},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),o("el-form-item",{attrs:{required:"",label:"当前登录账户"}},[o("el-input",{attrs:{disabled:"info"==e.formStus},model:{value:e.form.loginAccount,callback:function(t){e.$set(e.form,"loginAccount",t)},expression:"form.loginAccount"}})],1),e._v(" "),o("el-form-item",{attrs:{required:"",label:"创建时间"}},[o("el-input",{attrs:{disabled:"info"==e.formStus},model:{value:e.form.createdTime,callback:function(t){e.$set(e.form,"createdTime",t)},expression:"form.createdTime"}})],1),e._v(" "),o("el-form-item",{attrs:{required:"",label:"创建人"}},[o("el-input",{attrs:{disabled:"info"==e.formStus},model:{value:e.form.createdBy,callback:function(t){e.$set(e.form,"createdBy",t)},expression:"form.createdBy"}})],1),e._v(" "),o("el-form-item",{attrs:{required:"",label:"更新时间"}},[o("el-input",{attrs:{disabled:"info"==e.formStus},model:{value:e.form.updatedTime,callback:function(t){e.$set(e.form,"updatedTime",t)},expression:"form.updatedTime"}})],1),e._v(" "),o("el-form-item",{attrs:{required:"",label:"更新人"}},[o("el-input",{attrs:{disabled:"info"==e.formStus},model:{value:e.form.updatedBy,callback:function(t){e.$set(e.form,"updatedBy",t)},expression:"form.updatedBy"}})],1),e._v(" "),"edit"==e.formStus?o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")]),e._v(" "),o("el-button",{on:{click:function(t){e.formStus="info"}}},[e._v("取消")])],1):e._e()],1)],1)])],1)],1),e._v(" "),o("div",{staticClass:"buttons"}),e._v(" "),o("el-dialog",{attrs:{title:"添加节点",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{attrs:{model:e.addFrom,"label-width":"80"}},[o("el-form-item",{attrs:{label:"类别名称"}},[o("el-input",{model:{value:e.addFrom.cateName,callback:function(t){e.$set(e.addFrom,"cateName",t)},expression:"addFrom.cateName"}})],1),e._v(" "),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.addFrom.parentCateCode,expression:"addFrom.parentCateCode"}],attrs:{label:"父级节点编码"}},[o("el-input",{model:{value:e.addFrom.parentCateCode,callback:function(t){e.$set(e.addFrom,"parentCateCode",t)},expression:"addFrom.parentCateCode"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"节点编码"}},[o("el-input",{model:{value:e.addFrom.cateCode,callback:function(t){e.$set(e.addFrom,"cateCode",t)},expression:"addFrom.cateCode"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"备注"}},[o("el-input",{attrs:{type:"textarea",row:2,placeholder:"请输入内容"},model:{value:e.addFrom.remark,callback:function(t){e.$set(e.addFrom,"remark",t)},expression:"addFrom.remark"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.createCate}},[e._v("确定")]),e._v(" "),o("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1)},r=[],i=o("2d1d"),n=JSON.parse(sessionStorage.getItem("loginAccount")),s={name:"category",data:function(){return{loginAccount:n,defaultProps:{children:"childNodes",label:function(e){return e.attribute.cateName}},cateData:[],form:{},formRules:{cateName:{required:!0,message:"请输入节点名称",trigger:"blur"}},formStus:"info",dialogFormVisible:!1,addFrom:{cateName:"",cateCode:"",remark:"",parentCateCode:"",frontCateCode:null,loginAccount:void 0}}},created:function(){this.fencthData()},methods:{getCheckedNodes:function(){console.log(this.$refs.tree.getCheckedNodes())},getCheckedKeys:function(){console.log(this.$refs.tree.getCheckedKeys())},setCheckedNodes:function(){this.$refs.tree.setCheckedNodes([{id:5,label:"二级 2-1"},{id:9,label:"三级 1-1-1"}])},setCheckedKeys:function(){this.$refs.tree.setCheckedKeys([3])},resetChecked:function(){this.$refs.tree.setCheckedKeys([])},fencthData:function(){var e=this;Object(i["d"])().then((function(t){e.cateData=t.data}))},handleNodeClick:function(e){var t=this,o={cateCode:e.attribute.cateCode};Object(i["c"])(o).then((function(e){t.formStus="info";var o=Object.assign({loginAccount:t.loginAccount},e.data);t.form=o,t.form.loginAccount=t.loginAccount,console.log(t.form)}))},edit:function(){this.formStus="edit"},submit:function(){var e=this;this.$refs.form.validate((function(t){var o={cateCode:e.form.cateCode,loginAccount:e.form.loginAccount,remark:e.form.remark,cateName:e.form.cateName,parentCateCode:e.form.parentCateCode};if(!t)return console.log("提交失败"),!1;Object(i["e"])(o).then((function(t){e.$notify({title:"成功",message:t.msg,type:"success"}),e.formStus="info",e.fencthData()}))}))},createCate:function(){var e=this;Object(i["a"])(this.addFrom).then((function(t){e.$notify({title:"成功",message:"新增节点成功",type:"success"}),e.dialogFormVisible=!1,e.addFrom={cateName:"",parentCateCode:"",remark:"",frontCateCode:""},e.fencthData()}));this.$refs.tree.getCheckedNodes()},handleAdd:function(){var e=this.$refs.tree.getCheckedNodes();e.length>1?this.$message.error("您选择的节点大于一个，重新选择"):(0===e.length?(this.addFrom.frontCateCode=this.addFrom.cateCode,this.addFrom.parentCateCode=""):(this.addFrom.parentCateCode=this.$refs.tree.getCheckedNodes()[0].attribute.cateCode,this.addFrom.frontCateCode=this.$refs.tree.getCheckedNodes()[0].attribute.cateCode),this.addFrom.loginAccount=this.loginAccount,this.dialogFormVisible=!0)},handleDelete:function(){var e=this,t=this.$refs.tree.getCheckedNodes();if(1===t.length){var o={cateCode:t[0].attribute.cateCode};Object(i["b"])(o).then((function(t){e.$notify({title:"成功",message:t.msg,type:"success"}),e.fencthData()}))}else this.$message.error("请选择且只能选择一个节点")}}},l=s,d=o("2877"),c=Object(d["a"])(l,a,r,!1,null,null,null);t["default"]=c.exports}}]);